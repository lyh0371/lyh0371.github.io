(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{156:function(s,t,l){"use strict";l.r(t);var v=l(0),_=Object(v.a)({},(function(){var s=this,t=s.$createElement,l=s._self._c||t;return l("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[l("ul",[l("li",[s._v("启动 service mysqld start")]),s._v(" "),l("li",[s._v("关闭 service mysqld stop")])]),s._v(" "),l("h2",{attrs:{id:"安装-mysql-到自闭"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#安装-mysql-到自闭"}},[s._v("#")]),s._v(" 安装 mysql 到自闭")]),s._v(" "),l("p",[s._v("记得我是从昨天晚上 8 点开始装, 装到凌晨 1 点 未果。\n今天又重 9 点开始装 然后到下午 3 点,安装成功! "),l("br"),s._v("\n心累 🤔 "),l("br"),s._v("\n为了不让历史重演, 我决定重装 linux 服务器, 在把流程走一遍,回顾一下曲折的历史 "),l("br")]),s._v(" "),l("p",[l("strong",[s._v("主要参考文档")])]),s._v(" "),l("ul",[l("li",[s._v("https://zhuanlan.zhihu.com/p/141778941")]),s._v(" "),l("li",[s._v("https://www.linuxidc.com/Linux/2019-08/160316.htm")]),s._v(" "),l("li",[s._v("https://www.zhihu.com/question/41832866")])]),s._v(" "),l("h2",{attrs:{id:"为什么选择-mysql8-0-以上版本"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#为什么选择-mysql8-0-以上版本"}},[s._v("#")]),s._v(" 为什么选择 mysql8.0 以上版本")]),s._v(" "),l("p",[s._v("目前比较常用的应该是 5.X 版本了,但是看官网介绍 8 以上的版本比 5 版本快 2 倍,而且还带来了大量的更新和更快的性能"),l("br"),s._v("\n作为一个极客程序员,你懂得")]),s._v(" "),l("h2",{attrs:{id:"准备"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),l("ul",[l("li",[s._v("linux 服务器(CentOS 7.6 64 - 1 核 2GB 1Mbps) 乞丐版")]),s._v(" "),l("li",[s._v("ssh 链接工具 我用的是 secureCRT 用 shell 也可以的")]),s._v(" "),l("li",[s._v("良好的网络 (支持随时重装服务器 😂)")])]),s._v(" "),l("h2",{attrs:{id:"开始安装"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#开始安装"}},[s._v("#")]),s._v(" 开始安装")]),s._v(" "),l("ul",[l("li",[l("p",[s._v("1 安装 rpm\n"),l("code",[s._v("rpm -Uvh http://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm")]),s._v("\n安装完成示例:\n"),l("img",{attrs:{src:"/imgs/mysql1.png",alt:"安装rpm完成"}})])]),s._v(" "),l("li",[l("p",[s._v("2 列出 CentOS 7.6 当前支持的 MySQL 数据库，如下面所示\n"),l("code",[s._v("yum repolist all | grep mysql")]),s._v(" "),l("img",{attrs:{src:"/imgs/mysql2.png",alt:"mysql数据表"}}),s._v("\n从上面可以看出，会默认下载 5.7 版本的 MySQL 数据库，而 8.0 版本的默认是关闭的，先把 5.7 的禁用，启用 MySQL 8.0 数据库")])]),s._v(" "),l("li",[l("p",[s._v("3 打开文件, 修改设置\n"),l("code",[s._v("vi /etc/yum.repos.d/mysql-community.repo")])])])]),s._v(" "),l("p",[s._v("输入命令后显示如下代码，每一个模块代表一个版本数据库。")]),s._v(" "),l("p",[s._v("其中可以看到 5.7 版本, enabled=1, 改为 enabled=0, 禁用掉\n另外可以看到 8.0 版本, enabled=0, 改为 enabled=1, 开启\n修改成如图所示\n"),l("img",{attrs:{src:"/imgs/mysql3.png",alt:"mysql数据表"}})]),s._v(" "),l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),l("p",[s._v("linux 如何修改文件?")]),s._v(" "),l("p",[s._v("1 vi xxx 打开文件 "),l("br"),s._v("\n2 英文状态下 按"),l("code",[s._v("i")]),s._v("进入编辑模式"),l("br"),s._v("\n3 修改你要修改的内容"),l("br"),s._v("\n4 按"),l("code",[s._v("Esc")]),s._v("退出编辑"),l("br"),s._v("\n5 按"),l("code",[s._v(":wq")]),s._v(" 退出编辑模式并保存")])]),s._v(" "),l("ul",[l("li",[s._v("4 修改完之后查看可以用的 MySQL 版本\n"),l("code",[s._v("yum repolist enabled | grep mysql")])])]),s._v(" "),l("div",{staticClass:"language-linux extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[s._v("mysql-connectors-community/x86_64    MySQL Connectors Community              153\nmysql-tools-community/x86_64         MySQL Tools Community                   110\nmysql80-community/x86_64             MySQL 8.0 Community Server              177\n")])])]),l("p",[s._v("看到有 MySQL 8.0 版本之后，就可以正式开始安装 MySQL 了")]),s._v(" "),l("ul",[l("li",[l("p",[s._v("5 开始安装\n"),l("code",[s._v("yum install -y mysql-community-server")])]),s._v(" "),l("p",[s._v("安装成功示例：")]),s._v(" "),l("p",[l("img",{attrs:{src:"/imgs/mysql4.png",alt:"mysql安装成功"}})])]),s._v(" "),l("li",[l("p",[s._v("6 启动 mysql 并检查 mysql 状态")])])]),s._v(" "),l("p",[s._v("启动命令 "),l("code",[s._v("systemctl start mysqld")]),s._v("\n检查 mysql 状态 "),l("code",[s._v("systemctl status mysqld")]),s._v(" "),l("img",{attrs:{src:"/imgs/mysql5.png",alt:"mysql安装成功"}})]),s._v(" "),l("ul",[l("li",[s._v("7 MySQL 安装完成之后会在 LOG 文件( /var/log/mysqld.log)中生成一个默认的临时密码，可根据自己的实际情况修改(冒号后面为旧密码)")])]),s._v(" "),l("p",[l("code",[s._v("vi /var/log/mysqld.log")]),s._v(" 查看原始密码")]),s._v(" "),l("p",[l("img",{attrs:{src:"/imgs/mysql6.png",alt:"mysql密码查看"}})]),s._v(" "),l("ul",[l("li",[l("p",[s._v("8 修改原始密码\n"),l("code",[s._v("mysql -u root -p")]),s._v(" 回车后输入原始密码\n当你看到这个界面时说明登录 mysql 成功\n"),l("img",{attrs:{src:"/imgs/mysql7.png",alt:"mysql进入"}})]),s._v(" "),l("p",[s._v("输入 "),l("code",[s._v("ALTER USER 'root'@'localhost' IDENTIFIED BY '您的密码';")])]),s._v(" "),l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),l("p",[l("strong",[s._v("注意：")])]),s._v(" "),l("ul",[l("li",[s._v("密码必须 需要同时有大小写字母、数字、特殊符号")]),s._v(" "),l("li",[s._v("mysql 的每个语句最后都要带分号"),l("code",[s._v(";")])])])])])]),s._v(" "),l("p",[s._v("输入密码后 在输入"),l("code",[s._v("flush privileges;")]),s._v(" 保持更新 ： 如图\n"),l("img",{attrs:{src:"/imgs/mysql.png",alt:"mysql"}})]),s._v(" "),l("p",[s._v("ok 到这里 我们的数据库已经安装完毕了，接下来我们用 Navicat Premium 去链接我们的数据库")]),s._v(" "),l("p",[l("img",{attrs:{src:"/imgs/mysql10.png",alt:"mysql"}})]),s._v(" "),l("p",[s._v("😰 果然一切并没有那么简单 "),l("br")]),s._v(" "),l("p",[s._v("这是应为默认情况下 root 用户只允许本机访问,即使用 localhost 访问")]),s._v(" "),l("ul",[l("li",[s._v("9 解决权限问题")])]),s._v(" "),l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),l("ul",[l("li",[s._v("命令行链接 mysql "),l("code",[s._v("mysql -u root -p")]),s._v(" 回车输入刚才设置的密码")]),s._v(" "),l("li",[s._v("连接到 mysql(数据库名) "),l("code",[s._v("use mysql;")])]),s._v(" "),l("li",[s._v("输入 "),l("code",[s._v("update user set host = '%' where user = 'root';")]),s._v(" 命令")]),s._v(" "),l("li",[s._v("刷新配置 "),l("code",[s._v("flush privileges;")])])])]),s._v(" "),l("p",[l("img",{attrs:{src:"/imgs/mysql11.png",alt:"mysql"}})]),s._v(" "),l("p",[s._v("这个时候我们再用 Navicat Premium 去链接我们的数据库")]),s._v(" "),l("p",[l("img",{attrs:{src:"/imgs/mysql12.png",alt:"mysql"}}),s._v("\n美滋滋 😎")]),s._v(" "),l("ul",[l("li",[s._v("10 用 node 链接数据库")])]),s._v(" "),l("p",[s._v("如果报"),l("code",[s._v("Client does not support authentication protocol requested by server; conside")]),s._v("错误,需要我们用命令行输入")]),s._v(" "),l("div",{staticClass:"language-sh extra-class"},[l("pre",{pre:!0,attrs:{class:"language-sh"}},[l("code",[s._v("mysql -u root -p 回车 输入密码\nuse mysql\nalter user "),l("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v(" identified with mysql_native_password by "),l("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据库密码'")]),l("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush privileges"),l("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),l("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),l("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  退出mysql\n")])])]),l("h2",{attrs:{id:"总结"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),l("p",[s._v("回过头来看，其实步骤也没那么麻烦，第二次安装花费了不到 20 分钟的时间， 那为什么开始安装的时候这么久呢")]),s._v(" "),l("ul",[l("li",[s._v("原因 1 (关于 MariaDB)\ncemos7 以上的版本自带的有一个数据库 MariaDB 我，网上的很多教程都说在安装 mysql 之前需要把这个卸载， 但实际上不用卸载，卸载后反而会报错")])]),s._v(" "),l("p",[l("img",{attrs:{src:"/imgs/mysql13.png",alt:"mysql"}})]),s._v(" "),l("ul",[l("li",[s._v("原因 2 （注意服务器的对应端口 3306 和 22 是否开启）")])]),s._v(" "),l("p",[s._v("这个问题比较容易被忽略，一定要注意")])])}),[],!1,null,null,null);t.default=_.exports}}]);